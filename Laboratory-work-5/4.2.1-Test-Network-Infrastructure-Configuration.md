
# Перевірка конфігурації мережевої інфраструктури

| ID |
|---|
| WSTG-CONF-01 |
## Вступ
Внутрішня складність взаємопов’язаної та гетерогенної інфраструктури веб-серверів, яка може включати сотні веб-додатків, робить управління конфігурацією та її перевірку фундаментальним кроком у тестуванні та розгортанні кожного окремого додатка. Варто лише одній уразливості з’явитися, щоб підірвати безпеку всієї інфраструктури, і навіть дрібні та на перший погляд неважливі проблеми можуть перетворитися на серйозні ризики для іншого додатка на тому ж сервері. Для вирішення цих проблем надзвичайно важливо провести ретельну перевірку конфігурації та відомих проблем безпеки після складання повної карти архітектури.

Належне управління конфігурацією інфраструктури веб-серверів є дуже важливим для збереження безпеки самого додатка. Якщо елементи, такі як програмне забезпечення веб-сервера, сервери баз даних або сервери автентифікації, не будуть належним чином перевірені та захищені, вони можуть стати джерелом небажаних ризиків або спричинити появу нових уразливостей, які можуть поставити під загрозу сам додаток.

Наприклад, уразливість веб-сервера, яка дозволить віддаленому зловмиснику отримати доступ до початкового коду самого додатка (така уразливість неодноразово виникала як у веб-серверах, так і в серверах додатків), може скомпрометувати додаток, оскільки анонімні користувачі можуть використовувати розкриту інформацію в початковому коді для проведення атак на додаток або його користувачів.

Щоб перевірити інфраструктуру керування конфігурацією, потрібно виконати наступні кроки:
- Необхідно визначити різні елементи, що складають інфраструктуру, щоб зрозуміти, як вони взаємодіють із веб-додатком і як вони впливають на його безпеку.
 - Необхідно перевірити всі елементи інфраструктури, щоб переконатися, що вони не містять відомих уразливостей.
- Необхідно переглянути адміністративні інструменти, які використовуються для підтримки всіх різних елементів.
- Системи автентифікації необхідно перевірити, щоб переконатися, що вони відповідають потребам програми та що ними не можуть маніпулювати зовнішні користувачі, щоб отримати доступ.
- Слід підтримувати список визначених портів, необхідних для програми, і контролювати зміни.

Після відображення різних елементів, які складають інфраструктуру (див. [Відображення мережі та архітектури додатків](https://owasp.org/www-project-web-security-testing-guide/stable/4-Web_Application_Security_Testing/01-Information_Gathering/10-Map_Application_Architecture) ), можна переглянути конфігурацію кожного створеного елемента та перевірити наявність будь-яких відомих уразливостей.



## Цілі тесту
- Перегляньте конфігурації програм, встановлені в мережі, і переконайтеся, що вони не є вразливими.
- Переконайтеся, що використовувані фреймворки та системи безпечні та не схильні до відомих уразливостей через необслуговуване програмне забезпечення або параметри та облікові дані за замовчуванням.

## Як тестувати
### Відомі уразливості сервера
Уразливості, виявлені в різних областях архітектури додатка, будь то на веб-сервері чи у внутрішній базі даних, можуть серйозно скомпрометувати саму програму. Наприклад, розглянемо вразливість сервера, яка дозволяє віддаленому неавтентифікованому користувачеві завантажувати файли на веб-сервер або навіть замінювати файли. Ця вразливість може поставити під загрозу програму, оскільки зловмисний користувач може замінити саму програму або ввести код, який вплине на внутрішні сервери, оскільки її код програми запускатиметься так само, як і будь-яка інша програма.

Перевірити вразливості сервера може бути важко, якщо тест потрібно виконати за допомогою сліпого тесту на проникнення. У цих випадках уразливості потрібно перевірити з віддаленого сайту, як правило, за допомогою автоматизованого інструменту. Однак тестування деяких уразливостей може мати непередбачувані результати на веб-сервері, а тестування інших (наприклад, тих, які безпосередньо беруть участь у атаках на відмову в обслуговуванні) може бути неможливим через простої служби, якщо тестування пройшло успішно.

Деякі автоматизовані інструменти позначатимуть уразливості на основі отриманої версії веб-сервера. Це призводить як до помилкових позитивних, так і до помилкових негативних результатів. З одного боку, якщо версію веб-сервера було видалено або приховано адміністратором локального сайту, інструмент сканування не позначатиме сервер як уразливий, навіть якщо він таким є. З іншого боку, якщо постачальник, який надає програмне забезпечення, не оновлює версію веб-сервера після усунення вразливостей, інструмент сканування позначатиме вразливості, яких не існує. Останній випадок насправді дуже поширений, оскільки деякі постачальники операційної системи виправляють порти вразливостей у програмному забезпеченні, яке вони надають в операційній системі, але не виконують повне завантаження до останньої версії програмного забезпечення. Це відбувається в більшості дистрибутивів GNU/Linux, таких як Debian, Red Hat або SuSE. У більшості випадків сканування вразливостей архітектури програми виявляє лише вразливості, пов’язані з «відкритими» елементами архітектури (такими як веб-сервер), і зазвичай не може знайти вразливості, пов’язані з елементами, які безпосередньо не піддаються впливу, наприклад серверні частини автентифікації, база даних серверної частини або зворотні проксі-сервери, що використовуються.

Нарешті, не всі постачальники програмного забезпечення розкривають уразливості публічно, і тому ці слабкі місця не реєструються в загальновідомих базах даних уразливостей [2]. Ця інформація розкривається лише клієнтам або публікується через виправлення, які не мають супровідних порад. Це зменшує корисність інструментів сканування вразливостей. Як правило, покриття вразливості цих інструментів буде чудовим для звичайних продуктів (таких як веб-сервер Apache, Microsoft Internet Information Server або IBM Lotus Domino), але недостатнім для менш відомих продуктів.

Ось чому перевірку вразливостей найкраще проводити, коли тестувальнику надається внутрішня інформація про використовуване програмне забезпечення, включаючи версії та випуски, які використовуються, і виправлення, застосовані до програмного забезпечення. Маючи цю інформацію, тестувальник може отримати інформацію від самого постачальника та проаналізувати, які вразливості можуть бути присутніми в архітектурі та як вони можуть вплинути на саму програму. Якщо це можливо, ці вразливості можна протестувати, щоб визначити їхні реальні наслідки та виявити, чи можуть бути будь-які зовнішні елементи (такі як системи виявлення або запобігання вторгненням), які можуть зменшити або звести нанівець можливість успішного використання. Перевіривши конфігурацію, тестувальники можуть навіть визначити, що вразливості навіть немає, оскільки вона впливає на програмний компонент, який не використовується.

Варто також зазначити, що постачальники іноді мовчки усувають уразливості та роблять виправлення доступними з новими випусками програмного забезпечення. Різні постачальники матимуть різні цикли випусків, які визначають підтримку, яку вони можуть надавати для старіших випусків. Тестер із детальною інформацією про версії програмного забезпечення, що використовується архітектурою, може проаналізувати ризик, пов’язаний із використанням старих версій програмного забезпечення, які можуть не підтримуватися в короткостроковій перспективі або вже не підтримуються. Це критично, оскільки якщо вразливість виявиться в старій версії програмного забезпечення, яка більше не підтримується, системний персонал може не знати про це безпосередньо. Для неї ніколи не буде доступно жодних виправлень, і в порадах ця версія може не бути зазначеною як вразлива, оскільки вона більше не підтримується. Навіть якщо вони знають, що вразливість присутня і система є вразливою, їм потрібно буде виконати повне оновлення до нової версії програмного забезпечення, що може призвести до значного простою в архітектурі програми або змусити програму перезавантажити -закодовано через несумісність з останньою версією програмного забезпечення.
### Інструменти адміністрування
Будь-яка інфраструктура веб-сервера вимагає наявності адміністративних інструментів для підтримки та оновлення інформації, яка використовується програмою. Ця інформація включає статичний вміст (веб-сторінки, графічні файли), вихідний код програми, бази даних автентифікації користувачів тощо. Інструменти адміністрування відрізнятимуться залежно від сайту, технології чи програмного забезпечення, що використовується. Наприклад, деякі веб-сервери будуть керуватися за допомогою адміністративних інтерфейсів, які самі по собі є веб-серверами (наприклад, веб-сервер iPlanet), або адмініструватимуться файлами конфігурації звичайного тексту (у випадку Apache [3]) або використовуватимуть операційну систему Інструменти графічного інтерфейсу користувача (при використанні сервера Microsoft IIS або ASP.Net).

У більшості випадків конфігурація сервера оброблятиметься за допомогою різних інструментів обслуговування файлів, що використовуються веб-сервером, якими керують FTP-сервери, WebDAV, мережеві файлові системи (NFS, CIFS) або інші механізми. Очевидно, що операційна система елементів, які складають архітектуру додатка, також буде керуватись за допомогою інших інструментів. Додатки також можуть мати адміністративні інтерфейси, вбудовані в них, які використовуються для керування самими даними програми (користувачами, вмістом тощо).

Після того, як були складені схеми адміністративних інтерфейсів, які використовуються для управління різними частинами архітектури, важливо їх перевірити, оскільки, якщо зловмисник отримає доступ до будь-якого з них, він зможе скомпрометувати або пошкодити архітектуру додатка. Для цього важливо:
- Визначте механізми, які контролюють доступ до цих інтерфейсів та пов’язану з ними чутливість. Ця інформація може бути доступна в Інтернеті.
- Змініть ім'я користувача та пароль за умовчанням.

Деякі компанії обирають не керувати всіма аспектами своїх вебсерверних додатків самостійно, а залучають інші сторони для управління контентом, який надає вебдодаток. Зовнішня компанія може забезпечувати лише частину контенту (новини або промоакції) або повністю адмініструвати вебсервер (включно з контентом та кодом). У таких ситуаціях часто трапляється, що адміністративні інтерфейси доступні з Інтернету, оскільки використання Інтернету обходиться дешевше, ніж надання окремої лінії для підключення зовнішньої компанії до інфраструктури додатка через спеціалізований інтерфейс керування. У такій ситуації дуже важливо перевірити, чи можуть адміністративні інтерфейси бути вразливими до атак.

## Список літератури
- [1] WebSEAL, також відомий як Tivoli Authentication Manager, є зворотним проксі-сервером від IBM, який є частиною Tivoli framework.
- [2] Такі як Bugtraq від Symantec, X-Force від ISS або Національна база даних вразливостей (NVD) від NIST.
- [3] Існують деякі інструменти адміністрування на основі графічного інтерфейсу користувача для Apache (наприклад, NetLoony), але вони ще не мають широкого використання.

